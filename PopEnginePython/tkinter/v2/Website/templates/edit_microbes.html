<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Edit Environment</title>
    </head>
    <body>
        <form autocomplete="off" method="POST" action="{{ url_for('edit_microbes') }}">
            <!-- Add Resources -->
            {% for microbe in microbes %}
                <h2>{{ microbe.name }}</h2>
                Current Population:
                <input type="number" step="0.01" name="{{ microbe }}_population" value="{{ microbe.population }}">
                <br>

                Growth Rate: {{ microbe.growth_rate }}
                <br>

                <h2>Required Resources:</h2>
                {% if microbe.required_resources|length %}
                    {% for res, value in microbe.required_resources.items() %}
                        {{ res }}: {{ value }}
                        <br>
                    {% endfor %}
                {% else %}
                    No Required Resources
                    <br>
                {% endif %}
                <br>

                <h2>Produced Resources:</h2>
                <br>
                {% if microbe.produced_resources|length %}
                    {% for res, value in microbe.produced_resources.items() %}
                        {{ res }}: {{ value }}
                        <br>
                    {% endfor %}
                {% else %}
                    No Produced Resources
                    <br>
                {% endif %}
                <br>

                <h2>Toxins:</h2>
                <br>
                {% if microbe.toxins|length %}
                    {% for toxin, data in microbe.toxins.items() %}
                        <h3>{{ toxin }}:</h3>
                        Toxicity: {{ data['toxicity'] }}
                        <br>
                        Min Safe Density: {{ data['min_safe_density'] }}
                        <br>
                        Max Safe Density: {{ data['max_safe_density'] }}
                        <br>
                        Lethal Density: {{ data['lethal_density'] }}
                        <br>
                    {% endfor %}
                    <hr>
                {% else %}
                    No Toxins
                    <br>
                {% endif %}
            {% endfor %}

            <!-- Refresh page -->
            <button type="submit" id="submitResources" onclick="closeWindow()">Submit</button>
        </form>
        <script src="static/openExternalWindow.js"></script>
    </body>
</html>